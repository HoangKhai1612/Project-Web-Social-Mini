<template id="appShellTemplate">
    <header id="mainHeader" class="surface shadow-md p-4 sticky top-0 z-1000 border-b border-base">
        <div class="flex items-center justify-between max-w-7xl mx-auto">
            <div class="flex items-center gap-4">
                <div class="text-3xl text-content">üåê</div>
                <h1 class="site-name text-content font-bold text-xl">SocialVN</h1>
            </div>

            <div class="flex-1 max-w-xl mx-4 relative">
                <input type="text" id="globalSearchInput"
                    placeholder="üîç T√¨m ki·∫øm b·∫°n b√®, b√†i ƒëƒÉng..."
                    class="w-full p-2 border rounded-full border-base text-content">
                <div id="searchDropdown"
                    class="search-dropdown surface absolute w-full mt-2 rounded-lg shadow-lg hidden border border-base">
                    </div>
            </div>

            <div class="flex items-center gap-4">
                <button onclick="window.switchView('home')" class="p-2 text-2xl text-content">üè†</button>
                <button onclick="window.switchView('pages')" class="p-2 text-2xl text-content">üìÑ</button>
                <button onclick="window.switchView('notifications')" class="p-2 text-2xl text-content">üîî</button>

                <button onclick="window.switchView('friendRequests')" class="p-2 text-2xl relative text-content">
                    üë•
                    <span id="friendRequestCount"
                        class="absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">
                        0
                    </span>
                </button>

                <button onclick="window.switchView('profile', window.currentUser.userId)" class="p-2 text-2xl text-content">üë§</button>
                <button onclick="window.switchView('settings')" class="p-2 text-2xl text-content">‚öôÔ∏è</button>
            </div>
        </div>
    </header>

    <main class="flex-1 flex overflow-hidden" id="mainLayout">
        <div id="chatSidebar"
            class="chat-container surface border-r border-base overflow-hidden flex flex-col"
            style="width:33.33%;">
            
            <div class="p-4 border-b border-base flex items-center justify-between">
                <h2 class="text-content font-bold">Tr√≤ chuy·ªán</h2>
                <button onclick="window.showCreateGroupModal()" class="text-2xl text-content">‚ûï</button>
            </div>

            <div class="flex border-b border-base">
                <button onclick="window.switchChatTab('friends')" id="chatTabFriends"
                    class="flex-1 p-3 text-content border-b-2 border-primary border-blue-500">B·∫°n b√®</button>
                <button onclick="window.switchChatTab('strangers')" id="chatTabStrangers"
                    class="flex-1 p-3 text-content">Ng∆∞·ªùi l·∫°</button>
            </div>

            <div id="chatList" class="flex-1 overflow-auto">
                </div>

            <div id="activeChatOverlay"
                class="hidden fixed inset-0 surface z-100"></div>
        </div>

        <div class="resizer" id="splitter"></div>

        <div id="mainContent" class="main-content-container overflow-auto p-4">
            </div>
    </main>

    <div id="appModal"
        class="modal-backdrop fixed inset-0 flex items-center justify-center z-2000 hidden">
        <div class="modal-content surface rounded-lg shadow-2xl w-full max-w-lg" style="background-color:var(--surface-color);">
            <div id="modalBody"></div>
        </div>
    </div>
</template>